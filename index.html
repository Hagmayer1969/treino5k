<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plano de Treinamento 5km - Sub 6:00</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 40px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='m0 40l40-40h-40v40zm40 0v-40h-40l40 40z'/%3E%3C/g%3E%3C/svg%3E")
          repeat;
        animation: drift 20s linear infinite;
      }

      @keyframes drift {
        0% {
          transform: translate(0, 0);
        }
        100% {
          transform: translate(40px, 40px);
        }
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .animate-spin {
        animation: spin 1s linear infinite;
      }

      .logo {
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .logo-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        padding: 15px;
      }

      .nike-logo {
        width: 50px;
        height: auto;
        filter: brightness(0) invert(1);
      }

      .logo-text {
        font-size: 4rem;
        font-weight: 900;
        letter-spacing: -2px;
        background: linear-gradient(135deg, #ffffff, #f8f9fa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .header h1 {
        font-size: 2rem;
        margin-bottom: 10px;
        font-weight: 600;
        position: relative;
        z-index: 2;
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
        position: relative;
        z-index: 2;
      }

      .controls {
        padding: 30px;
        background: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
      }

      .control-group {
        display: flex;
        align-items: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .control-group label {
        font-weight: 600;
        color: #495057;
      }

      .control-group input {
        padding: 12px 16px;
        border: 2px solid #dee2e6;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .control-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .btn {
        padding: 12px 24px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .btn:hover {
        transform: translateY(-2px);
      }

      .timeline {
        padding: 40px;
      }

      .week {
        margin-bottom: 60px;
        position: relative;
      }

      .week::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: linear-gradient(to bottom, #667eea, #764ba2);
        border-radius: 2px;
      }

      .week-header {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 20px 30px;
        border-radius: 15px;
        margin-bottom: 20px;
        margin-left: 20px;
      }

      .week-title {
        font-size: 1.5rem;
        font-weight: 700;
      }

      .week-dates {
        font-size: 1rem;
        opacity: 0.9;
        margin-top: 5px;
      }

      .workouts {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-left: 20px;
      }

      .workout-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 25px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .workout-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--workout-color);
      }

      .workout-number {
        position: absolute;
        top: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        background: var(--workout-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .workout-date-input {
        background: transparent;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 8px 12px;
        font-size: 0.9rem;
        color: #495057;
        margin-top: 5px;
        width: 100%;
        max-width: 200px;
        transition: all 0.3s ease;
      }

      .workout-date-input:focus {
        outline: none;
        border-color: var(--workout-color);
        box-shadow: 0 0 0 2px rgba(var(--workout-color-rgb), 0.2);
      }

      .workout-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .workout-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .workout-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        background: var(--workout-color);
      }

      .workout-info h3 {
        font-size: 1.2rem;
        color: #212529;
        margin-bottom: 5px;
      }

      .workout-date {
        color: #6c757d;
        font-size: 0.95rem;
      }

      .workout-steps {
        margin-bottom: 20px;
      }

      .step {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        border-left: 4px solid var(--workout-color);
      }

      .step:last-child {
        margin-bottom: 0;
      }

      .step-title {
        font-weight: 600;
        color: #495057;
        margin-bottom: 5px;
      }

      .step-details {
        color: #6c757d;
        font-size: 0.9rem;
      }

      .workout-duration {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 15px;
        border-top: 1px solid #e9ecef;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .duration-time {
        color: var(--workout-color);
        font-size: 1.1rem;
      }

      .workout-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .strava-btn {
        flex: 1;
        min-width: 120px;
        padding: 10px 16px;
        background: linear-gradient(135deg, #fc4c02, #e34402);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .strava-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(252, 76, 2, 0.3);
      }

      .strava-btn:disabled {
        background: #6c757d;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .strava-btn.completed {
        background: linear-gradient(135deg, #28a745, #20c997);
      }

      .complete-btn {
        flex: 1;
        min-width: 120px;
        padding: 10px 16px;
        background: linear-gradient(135deg, var(--workout-color), var(--workout-color));
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        filter: brightness(1);
      }

      .complete-btn:hover {
        transform: translateY(-2px);
        filter: brightness(1.1);
      }

      .complete-btn.completed {
        background: linear-gradient(135deg, #28a745, #20c997);
      }

      .strava-connection {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: center;
      }

      .strava-connect-btn {
        background: linear-gradient(135deg, #fc4c02, #e34402);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 12px 24px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .strava-connect-btn:hover {
        transform: translateY(-2px);
      }

      .strava-status {
        color: #28a745;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      /* Workout type colors */
      .base {
        --workout-color: #28a745;
        --workout-color-rgb: 40, 167, 69;
      }
      .interval {
        --workout-color: #dc3545;
        --workout-color-rgb: 220, 53, 69;
      }
      .recovery {
        --workout-color: #6c757d;
        --workout-color-rgb: 108, 117, 125;
      }
      .fartlek {
        --workout-color: #fd7e14;
        --workout-color-rgb: 253, 126, 20;
      }
      .tempo {
        --workout-color: #6f42c1;
        --workout-color-rgb: 111, 66, 193;
      }
      .speed {
        --workout-color: #e83e8c;
        --workout-color-rgb: 232, 62, 140;
      }
      .test {
        --workout-color: #20c997;
        --workout-color-rgb: 32, 201, 151;
      }
      .activation {
        --workout-color: #ffc107;
        --workout-color-rgb: 255, 193, 7;
      }

      .race-card {
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        color: white;
        text-align: center;
        padding: 40px;
        border-radius: 15px;
        margin: 40px 20px;
      }

      .race-card h2 {
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .race-target {
        font-size: 1.5rem;
        margin-top: 15px;
        opacity: 0.9;
      }

      @media (max-width: 768px) {
        .logo {
          flex-direction: column;
          gap: 10px;
        }

        .logo-icon {
          width: 60px;
          height: 60px;
          font-size: 2rem;
          padding: 10px;
        }

        .nike-logo {
          width: 40px;
        }

        .logo-text {
          font-size: 3rem;
        }

        .header h1 {
          font-size: 1.5rem;
        }

        .workouts {
          grid-template-columns: 1fr;
        }

        .control-group {
          flex-direction: column;
          align-items: stretch;
        }

        .workout-number {
          width: 35px;
          height: 35px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo">
          <div class="logo-icon">
            <svg class="nike-logo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M24 7.8L6.442 15.276c-1.456.616-2.679.925-3.668.925-1.456 0-2.455-.616-2.455-1.848 0-.462.154-.924.462-1.232.462-.462 1.078-.77 1.925-.77.693 0 1.54.154 2.563.462l8.316-3.668c.77-.308 1.232-.462 1.54-.462 1.078 0 1.694.616 1.694 1.54 0 .308-.077.616-.231.77l7.546-3.053c.462-.154.924-.231 1.232-.231.77 0 1.232.462 1.232 1.232 0 .462-.154.924-.462 1.232l-2.563 1.078c-.462.231-.924.308-1.232.308-.77 0-1.232-.462-1.232-1.232 0-.308.077-.616.231-.77l-5.698 2.455c-.462.154-.924.231-1.232.231-.693 0-1.232-.385-1.232-1.078 0-.308.077-.616.231-.77l-6.314 2.679c-.462.154-.924.231-1.232.231-.693 0-1.232-.385-1.232-1.078 0-.308.077-.616.231-.77L24 7.8z"/>
            </svg>
          </div>
          <div class="logo-text">JUST</div>
        </div>
        <h1>Plano de Treinamento 5km</h1>
        <p>Meta: Ritmo abaixo de 6:00 min/km</p>
      </div>

      <div class="controls">
        <div class="strava-connection" id="stravaConnection">
          <div id="stravaDisconnected">
            <h3>Conectar com Strava</h3>
            <p>Conecte sua conta Strava para sincronizar automaticamente seus treinos</p>
            <button class="strava-connect-btn" onclick="connectStrava()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.599h3.065L9.229 0L4.079 10.172h3.065"/>
              </svg>
              Conectar Strava
            </button>
          </div>
          <div id="stravaConnected" style="display: none;">
            <div class="strava-status">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Conectado ao Strava
            </div>
            <button class="btn" onclick="disconnectStrava()" style="margin-top: 10px; background: #6c757d;">
              Desconectar
            </button>
          </div>
        </div>
        
        <div class="control-group">
          <label for="startDate">Data de Início:</label>
          <input type="date" id="startDate" value="2024-08-20" />

          <label for="raceDate">Data da Prova:</label>
          <input type="date" id="raceDate" value="2024-09-22" />

          <button class="btn" onclick="updatePlan()">Atualizar Datas</button>
        </div>
      </div>

      <div class="timeline" id="timeline">
        <!-- Conteúdo será gerado pelo JavaScript -->
      </div>
    </div>

    <script>
      const workoutPlans = [
        {
          week: 1,
          title: "Base Aeróbica",
          workouts: [
            {
              day: 1, // terça
              name: "Corrida Base Semana 1",
              type: "base",
              icon: "🔵",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
                { title: "Corrida", details: "25min - Ritmo 7:00-7:10/km" },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,0-5,5 km/h",
                },
              ],
              duration: "35:00",
            },
            {
              day: 2, // quarta
              name: "Intervalos 4x3min Semana 1",
              type: "interval",
              icon: "🟢",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Repetir 4x",
                  details:
                    "3min - Ritmo 6:15-6:25/km (Esteira 9,5-9,8 km/h) + 2min - Recuperação (Esteira 7,0-7,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
              ],
              duration: "30:00",
            },
            {
              day: 3, // quinta
              name: "Corrida Regenerativa Semana 1",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "30min - Ritmo 7:55-8:05/km (Esteira 7,5-7,8 km/h)",
                },
              ],
              duration: "30:00",
            },
            {
              day: 4, // sexta
              name: "Fartlek Semana 1",
              type: "fartlek",
              icon: "🟡",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Repetir 5x",
                  details:
                    "2min - Ritmo 6:35-6:45/km (Esteira 9,0-9,2 km/h) + 1min - Recuperação (Esteira 7,5-7,8 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "25:00",
            },
            {
              day: 5, // sábado
              name: "Corrida de Tempo Semana 1",
              type: "tempo",
              icon: "🔴",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,5-7,0 km/h",
                },
                {
                  title: "Corrida",
                  details: "15min - Ritmo 6:35-6:45/km (Esteira 9,0-9,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "25:00",
            },
          ],
        },
        {
          week: 2,
          title: "Progressão",
          workouts: [
            {
              day: 0, // segunda
              name: "Corrida Base Semana 2",
              type: "base",
              icon: "🔵",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
                {
                  title: "Corrida",
                  details: "28min - Ritmo 6:45-6:55/km (Esteira 8,8-9,0 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,0-5,5 km/h",
                },
              ],
              duration: "38:00",
            },
            {
              day: 1, // terça
              name: "Intervalos 5x3min Semana 2",
              type: "interval",
              icon: "🟢",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Repetir 5x",
                  details:
                    "3min - Ritmo 6:05-6:15/km (Esteira 9,8-10,0 km/h) + 1:30min - Recuperação (Esteira 7,0-7,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
              ],
              duration: "32:00",
            },
            {
              day: 2, // quarta
              name: "Corrida Regenerativa Semana 2",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "32min - Ritmo 7:35-7:45/km (Esteira 7,8-8,0 km/h)",
                },
              ],
              duration: "32:00",
            },
            {
              day: 3, // quinta
              name: "Fartlek Semana 2",
              type: "fartlek",
              icon: "🟡",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Repetir 6x",
                  details:
                    "2min - Ritmo 6:25-6:35/km (Esteira 9,2-9,5 km/h) + 1min - Recuperação (Esteira 7,8-8,0 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "28:00",
            },
            {
              day: 4, // sexta
              name: "Corrida de Tempo Semana 2",
              type: "tempo",
              icon: "🔴",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,5-7,0 km/h",
                },
                {
                  title: "Corrida",
                  details: "18min - Ritmo 6:25-6:35/km (Esteira 9,2-9,5 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "28:00",
            },
          ],
        },
        {
          week: 3,
          title: "Intensidade",
          workouts: [
            {
              day: 0, // segunda
              name: "Corrida Base Semana 3",
              type: "base",
              icon: "🔵",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Corrida",
                  details: "30min - Ritmo 6:35-6:45/km (Esteira 9,0-9,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
              ],
              duration: "40:00",
            },
            {
              day: 1, // terça
              name: "Intervalos 6x2.5min Semana 3",
              type: "interval",
              icon: "🟢",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,5-7,0 km/h",
                },
                {
                  title: "Repetir 6x",
                  details:
                    "2:30min - Ritmo 5:55-6:05/km (Esteira 10,0-10,2 km/h) + 1:30min - Recuperação (Esteira 7,5-7,8 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "34:00",
            },
            {
              day: 2, // quarta
              name: "Corrida Regenerativa Semana 3",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "30min - Ritmo 7:25-7:35/km (Esteira 8,0-8,2 km/h)",
                },
              ],
              duration: "30:00",
            },
            {
              day: 3, // quinta
              name: "Fartlek Semana 3",
              type: "fartlek",
              icon: "🟡",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Repetir 10x",
                  details:
                    "1:30min - Ritmo 6:15-6:25/km (Esteira 9,5-9,8 km/h) + 1:30min - Recuperação (Esteira 8,0-8,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "40:00",
            },
            {
              day: 4, // sexta
              name: "Corrida de Tempo Semana 3",
              type: "tempo",
              icon: "🔴",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 7,0-7,5 km/h",
                },
                {
                  title: "Corrida",
                  details: "20min - Ritmo 6:15-6:25/km (Esteira 9,5-9,8 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "30:00",
            },
          ],
        },
        {
          week: 4,
          title: "Pico",
          workouts: [
            {
              day: 0, // segunda
              name: "Corrida Base Semana 4",
              type: "base",
              icon: "🔵",
              steps: [
                {
                  title: "Aquecimento",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
                {
                  title: "Corrida",
                  details: "32min - Ritmo 6:25-6:35/km (Esteira 9,2-9,5 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 5,5-6,0 km/h",
                },
              ],
              duration: "42:00",
            },
            {
              day: 1, // terça
              name: "Intervalos 5x1km Semana 4",
              type: "interval",
              icon: "🟢",
              steps: [
                {
                  title: "Aquecimento",
                  details: "8min - Velocidade Esteira 7,0-7,5 km/h",
                },
                {
                  title: "Repetir 5x",
                  details:
                    "1km - Ritmo 5:50-6:00/km (Esteira 10,0-10,3 km/h) + 2min - Recuperação (Esteira 7,5-7,8 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "5min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "38:00",
            },
            {
              day: 2, // quarta
              name: "Corrida Regenerativa Semana 4",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "28min - Ritmo 7:15-7:25/km (Esteira 8,2-8,5 km/h)",
                },
              ],
              duration: "28:00",
            },
            {
              day: 3, // quinta
              name: "Teste de Tempo 3km",
              type: "test",
              icon: "🟡",
              steps: [
                {
                  title: "Aquecimento",
                  details: "8min - Velocidade Esteira 7,0-7,5 km/h",
                },
                {
                  title: "Teste",
                  details: "3km - Ritmo 5:55-6:05/km (Esteira 10,0-10,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "7min - Velocidade Esteira 6,5-7,0 km/h",
                },
              ],
              duration: "33:00",
            },
            {
              day: 4, // sexta
              name: "Velocidade 6x400m Semana 4",
              type: "speed",
              icon: "🔴",
              steps: [
                {
                  title: "Aquecimento",
                  details: "8min - Velocidade Esteira 7,5-8,0 km/h",
                },
                {
                  title: "Repetir 6x",
                  details:
                    "400m - Ritmo 5:25-5:35/km (Esteira 11,0-11,5 km/h) + 400m - Recuperação (Esteira 7,0-7,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "7min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "30:00",
            },
          ],
        },
        {
          week: 5,
          title: "Polimento",
          workouts: [
            {
              day: 0, // segunda
              name: "Corrida Leve Polimento",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "35min - Ritmo 7:00-7:10/km (Esteira 8,5-8,8 km/h)",
                },
              ],
              duration: "35:00",
            },
            {
              day: 1, // terça
              name: "Qualidade Curta Polimento",
              type: "interval",
              icon: "🟢",
              steps: [
                {
                  title: "Aquecimento",
                  details: "10min - Velocidade Esteira 7,0-7,5 km/h",
                },
                {
                  title: "Repetir 3x",
                  details:
                    "1km - Ritmo 5:40-5:50/km (Esteira 10,3-10,6 km/h) + 3min - Recuperação (Esteira 7,5-7,8 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "8min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "32:00",
            },
            {
              day: 2, // quarta
              name: "Regenerativo Fácil Polimento",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Contínua",
                  details: "25min - Ritmo 7:25-7:35/km (Esteira 8,0-8,2 km/h)",
                },
              ],
              duration: "25:00",
            },
            {
              day: 3, // quinta
              name: "Ativação para Prova",
              type: "activation",
              icon: "🟡",
              steps: [
                {
                  title: "Aquecimento",
                  details: "10min - Velocidade Esteira 7,0-7,5 km/h",
                },
                {
                  title: "Repetir 4x",
                  details:
                    "200m - Ritmo 5:10-5:20/km (Esteira 11,5-12,0 km/h) + 200m - Recuperação (Esteira 7,0-7,2 km/h)",
                },
                {
                  title: "Volta à Calma",
                  details: "10min - Velocidade Esteira 6,0-6,5 km/h",
                },
              ],
              duration: "25:00",
            },
            {
              day: 4, // sexta
              name: "Preparação Pré-Prova",
              type: "recovery",
              icon: "🔵",
              steps: [
                {
                  title: "Corrida Leve",
                  details: "20min - Ritmo 8:30-8:40/km (Esteira 7,0-7,2 km/h)",
                },
              ],
              duration: "20:00",
            },
          ],
        },
      ];

      function formatDate(date) {
        return date.toLocaleDateString("pt-BR", {
          weekday: "long",
          day: "2-digit",
          month: "2-digit",
        });
      }

      function addDays(date, days) {
        const result = new Date(date);
        result.setDate(result.getDate() + days);
        return result;
      }

      function getWeekDates(startDate, weekNumber) {
        const weekStart = addDays(startDate, (weekNumber - 1) * 7);
        const weekEnd = addDays(weekStart, 6);
        return {
          start: weekStart.toLocaleDateString("pt-BR", {
            day: "2-digit",
            month: "2-digit",
          }),
          end: weekEnd.toLocaleDateString("pt-BR", {
            day: "2-digit",
            month: "2-digit",
          }),
        };
      }

      function getDayNames() {
        return [
          "Segunda",
          "Terça",
          "Quarta",
          "Quinta",
          "Sexta",
          "Sábado",
          "Domingo",
        ];
      }

      function updatePlan() {
        const startDate = new Date(document.getElementById("startDate").value);
        const timeline = document.getElementById("timeline");

        let html = "";
        let workoutCounter = 1;

        workoutPlans.forEach((week) => {
          const weekDates = getWeekDates(startDate, week.week);

          html += `
                    <div class="week">
                        <div class="week-header">
                            <div class="week-title">Semana ${week.week} - ${week.title}</div>
                            <div class="week-dates">${weekDates.start} - ${weekDates.end}</div>
                        </div>
                        <div class="workouts">
                `;

          week.workouts.forEach((workout) => {
            const workoutDate = addDays(
              startDate,
              (week.week - 1) * 7 + workout.day
            );
            const dayName = getDayNames()[workout.day];
            const workoutId = `workout-${week.week}-${workout.day}`;

            html += `
                        <div class="workout-card ${workout.type}">
                            <div class="workout-number">${workoutCounter}</div>
                            <div class="workout-header">
                                <div class="workout-icon">${workout.icon}</div>
                                <div class="workout-info">
                                    <h3>${workout.name}</h3>
                                    <div class="workout-date">${dayName}</div>
                                    <input type="date" 
                                           class="workout-date-input" 
                                           id="${workoutId}"
                                           value="${
                                             workoutDate
                                               .toISOString()
                                               .split("T")[0]
                                           }"
                                           onchange="updateWorkoutDate('${workoutId}', this.value)">
                                </div>
                            </div>
                            <div class="workout-steps">
                    `;

            workout.steps.forEach((step) => {
              html += `
                            <div class="step">
                                <div class="step-title">${step.title}</div>
                                <div class="step-details">${step.details}</div>
                            </div>
                        `;
            });

            html += `
                            </div>
                            <div class="workout-duration">
                                <span>Duração Total:</span>
                                <span class="duration-time">${workout.duration}</span>
                            </div>
                            <div class="workout-actions">
                                <button class="complete-btn" onclick="completeWorkout('${workoutId}', ${workoutCounter})" id="complete-${workoutId}">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    Marcar Concluído
                                </button>
                                <button class="strava-btn" onclick="syncWithStrava('${workoutId}', ${workoutCounter})" id="strava-${workoutId}" disabled>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.599h3.065L9.229 0L4.079 10.172h3.065"/>
                                    </svg>
                                    Sincronizar Strava
                                </button>
                            </div>
                        </div>
                    `;

            workoutCounter++;
          });

          html += `
                        </div>
                    </div>
                `;
        });

        // Adicionar card da prova
        const raceDate = new Date(document.getElementById("raceDate").value);
        html += `
                <div class="race-card">
                    <h2>🏁 DIA DA PROVA</h2>
                    <div class="workout-date">${formatDate(raceDate)}</div>
                    <div class="race-target">Meta: 5km em menos de 30:00</div>
                </div>
            `;

        timeline.innerHTML = html;
      }

      function updateWorkoutDate(workoutId, newDate) {
        const input = document.getElementById(workoutId);
        const date = new Date(newDate);
        const dayName =
          getDayNames()[date.getDay() === 0 ? 6 : date.getDay() - 1];
        const parentCard = input.closest(".workout-card");
        const dayDisplay = parentCard.querySelector(".workout-date");
        dayDisplay.textContent = dayName;
      }

      // Strava Integration Functions
      let stravaConnected = false;
      let completedWorkouts = new Set();

      function connectStrava() {
        // Simular conexão com Strava (em produção, seria através da API do Strava)
        const clientId = 'YOUR_STRAVA_CLIENT_ID'; // Substitua pelo seu Client ID
        const redirectUri = window.location.origin + window.location.pathname;
        const scope = 'activity:write,activity:read_all';
        
        // URL de autorização do Strava
        const authUrl = `https://www.strava.com/oauth/authorize?client_id=${clientId}&response_type=code&redirect_uri=${redirectUri}&approval_prompt=force&scope=${scope}`;
        
        // Para demonstração, vamos simular a conexão
        if (confirm('Conectar com Strava?\n\nEm produção, isso redirecionaria para a página de autorização do Strava.')) {
          stravaConnected = true;
          updateStravaStatus();
          enableStravaButtons();
          localStorage.setItem('stravaConnected', 'true');
        }
      }

      function disconnectStrava() {
        stravaConnected = false;
        updateStravaStatus();
        disableStravaButtons();
        localStorage.removeItem('stravaConnected');
        localStorage.removeItem('stravaAccessToken');
      }

      function updateStravaStatus() {
        const disconnected = document.getElementById('stravaDisconnected');
        const connected = document.getElementById('stravaConnected');
        
        if (stravaConnected) {
          disconnected.style.display = 'none';
          connected.style.display = 'block';
        } else {
          disconnected.style.display = 'block';
          connected.style.display = 'none';
        }
      }

      function enableStravaButtons() {
        const stravaButtons = document.querySelectorAll('.strava-btn');
        stravaButtons.forEach(btn => {
          btn.disabled = false;
        });
      }

      function disableStravaButtons() {
        const stravaButtons = document.querySelectorAll('.strava-btn');
        stravaButtons.forEach(btn => {
          btn.disabled = true;
        });
      }

      function completeWorkout(workoutId, workoutNumber) {
        const completeBtn = document.getElementById(`complete-${workoutId}`);
        const stravaBtn = document.getElementById(`strava-${workoutId}`);
        
        if (!completedWorkouts.has(workoutId)) {
          completedWorkouts.add(workoutId);
          completeBtn.classList.add('completed');
          completeBtn.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Concluído
          `;
          
          if (stravaConnected) {
            stravaBtn.disabled = false;
          }
          
          // Salvar no localStorage
          const completed = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
          completed.push(workoutId);
          localStorage.setItem('completedWorkouts', JSON.stringify(completed));
          
          showNotification(`Treino ${workoutNumber} marcado como concluído!`, 'success');
        }
      }

      function syncWithStrava(workoutId, workoutNumber) {
        if (!stravaConnected) {
          showNotification('Conecte-se ao Strava primeiro!', 'error');
          return;
        }
        
        if (!completedWorkouts.has(workoutId)) {
          showNotification('Marque o treino como concluído primeiro!', 'error');
          return;
        }
        
        const stravaBtn = document.getElementById(`strava-${workoutId}`);
        stravaBtn.innerHTML = `
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="animate-spin">
            <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          Sincronizando...
        `;
        
        // Simular sincronização com Strava
        setTimeout(() => {
          stravaBtn.classList.add('completed');
          stravaBtn.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Sincronizado
          `;
          stravaBtn.disabled = true;
          
          // Salvar no localStorage
          const synced = JSON.parse(localStorage.getItem('syncedWorkouts') || '[]');
          synced.push(workoutId);
          localStorage.setItem('syncedWorkouts', JSON.stringify(synced));
          
          showNotification(`Treino ${workoutNumber} sincronizado com Strava!`, 'success');
        }, 2000);
      }

      function showNotification(message, type) {
        // Criar elemento de notificação
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 1000;
          padding: 15px 20px;
          border-radius: 10px;
          color: white;
          font-weight: 600;
          transform: translateX(100%);
          transition: transform 0.3s ease;
          ${type === 'success' ? 'background: linear-gradient(135deg, #28a745, #20c997);' : 'background: linear-gradient(135deg, #dc3545, #c82333);'}
        `;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        // Mostrar notificação
        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
        }, 100);
        
        // Remover notificação após 3 segundos
        setTimeout(() => {
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 3000);
      }

      function loadUserData() {
        // Carregar dados do localStorage
        stravaConnected = localStorage.getItem('stravaConnected') === 'true';
        const completed = JSON.parse(localStorage.getItem('completedWorkouts') || '[]');
        const synced = JSON.parse(localStorage.getItem('syncedWorkouts') || '[]');
        
        completed.forEach(workoutId => completedWorkouts.add(workoutId));
        
        updateStravaStatus();
        
        // Atualizar botões após carregar o plano
        setTimeout(() => {
          completed.forEach(workoutId => {
            const completeBtn = document.getElementById(`complete-${workoutId}`);
            const stravaBtn = document.getElementById(`strava-${workoutId}`);
            
            if (completeBtn) {
              completeBtn.classList.add('completed');
              completeBtn.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Concluído
              `;
            }
          });
          
          synced.forEach(workoutId => {
            const stravaBtn = document.getElementById(`strava-${workoutId}`);
            if (stravaBtn) {
              stravaBtn.classList.add('completed');
              stravaBtn.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Sincronizado
              `;
              stravaBtn.disabled = true;
            }
          });
          
          if (stravaConnected) {
            enableStravaButtons();
          }
        }, 100);
      }

      // Carregar o plano ao carregar a página
      document.addEventListener("DOMContentLoaded", function () {
        loadUserData();
        updatePlan();
      });
    </script>
  </body>
</html>
